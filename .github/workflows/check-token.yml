name: Check Cloudflare Token

on:
  workflow_dispatch:

jobs:
  check-token:
    runs-on: ubuntu-latest
    steps:
      - name: Check Token Expiry
        env:
          CF_TOKEN: \${{ secrets.CLOUDFLARE_API_TOKEN }}
        run: |
          echo "Checking Cloudflare API Token..."
          response=$(curl -s -X GET "https://api.cloudflare.com/client/v4/user/tokens/verify"             -H "Authorization: Bearer $CF_TOKEN"             -H "Content-Type: application/json")
          echo "$response" | jq '.'
          
          expires_on=$(echo "$response" | jq -r '.result.expires_on // "Never"')
          status=$(echo "$response" | jq -r '.result.status')
          
          echo "Token Status: $status"
          echo "Expires On: $expires_on"
