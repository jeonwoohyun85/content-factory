name: Cache Refresh

on:
  schedule:
    - cron: '30 15 * * *'  # 매일 15:30 UTC = 00:30 KST (포스팅 30분 후)
  workflow_dispatch:

jobs:
  refresh-cache:
    runs-on: ubuntu-latest
    steps:
      - name: Refresh all caches
        run: |
          echo "Refreshing cache for all subdomains"

          for subdomain in 00001 00002 00003 00004; do
            echo "Refreshing cache for ${subdomain}"
            RESULT=$(curl -s "https://make-page.com/refresh?subdomain=${subdomain}")
            echo "${subdomain}: ${RESULT}"
          done

          echo "✅ All caches refreshed"
